# Spec-Sync SSOT - UI 介面設計方案

## 🎯 設計目標

將命令列工具轉變為易用的 Web 介面,讓非技術人員也能輕鬆操作。

---

## 📊 使用者痛點分析

### 當前問題

| 操作 | 現況 | 問題 |
|------|------|------|
| **編輯 SSOT** | 手動編輯 YAML | 需要了解 YAML 語法 |
| **設定對應表** | 手動編輯 mapping.yaml | 容易出錯,難以視覺化 |
| **產生文件** | 執行 PowerShell 命令 | 需要記住命令參數 |
| **查看結果** | 手動開啟檔案 | 無法即時預覽 |
| **錯誤診斷** | 閱讀終端機輸出 | 不易理解 |

### 目標改善

✅ **視覺化編輯**: 表單取代 YAML 編輯  
✅ **拖拉設定**: 視覺化欄位對應  
✅ **一鍵執行**: 按鈕取代命令列  
✅ **即時預覽**: 瀏覽器內預覽結果  
✅ **友善提示**: 清楚的錯誤訊息和操作指引

---

## 🏗️ UI 架構建議

### 方案比較

| 方案 | 技術棧 | 優點 | 缺點 | 推薦度 |
|------|--------|------|------|--------|
| **A. Web UI<br>(推薦)** | Flask + Vue.js | • 跨平台<br>• 易部署<br>• 現代化 | 需要啟動伺服器 | ⭐⭐⭐⭐⭐ |
| **B. Desktop App** | Electron | • 獨立應用<br>• 離線使用 | 打包體積大 | ⭐⭐⭐ |
| **C. CLI UI** | Rich/Textual | • 輕量<br>• 快速 | 功能受限 | ⭐⭐ |

### 推薦方案: **Web UI (Flask + Vue 3)**

**理由**:
- ✅ 團隊協作友善 (瀏覽器即可使用)
- ✅ 易於整合現有 Python 腳本
- ✅ 可視覺化呈現複雜資料結構
- ✅ 未來可擴展為雲端服務

---

## 🎨 UI 介面設計

### 主介面架構

```
┌─────────────────────────────────────────────────────┐
│  Spec-Sync SSOT                        👤 管理員  ⚙️ │
├─────────────────────────────────────────────────────┤
│                                                     │
│  📋 SSOT 資料編輯  │  🔗 欄位對應  │  📄 模板管理  │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 頁面 1: SSOT 資料編輯

```
┌─────────────────────────────────────────────────────┐
│  📋 SSOT 資料編輯                    [儲存] [匯出]   │
├─────────────────────────────────────────────────────┤
│                                                     │
│  📦 產品資訊                                         │
│  ┌─────────────────────────────────────────────┐   │
│  │ 產品名稱: [_____________________]            │   │
│  │ 版本號:   [_____________________]            │   │
│  │ 描述:     [________________________]         │   │
│  │           [________________________]         │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ⚙️ 技術規格                                         │
│  ┌─────────────────────────────────────────────┐   │
│  │ 🖥️ 硬體規格                                  │   │
│  │   CPU:    [_____________________]            │   │
│  │   記憶體: [_____________________]            │   │
│  │   儲存:   [_____________________]            │   │
│  │                                              │   │
│  │ 💿 軟體規格                                   │   │
│  │   作業系統: [___________________]            │   │
│  │   框架:     [___________________]            │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  📅 專案資訊                                         │
│  ┌─────────────────────────────────────────────┐   │
│  │ 開始日期: [📅 2025-11-13]                    │   │
│  │ 結束日期: [📅 2026-03-31]                    │   │
│  │ 預算:     [_____________________] 元         │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│                          [💾 儲存變更] [🔄 重置]    │
└─────────────────────────────────────────────────────┘
```

### 頁面 2: 欄位對應設定

```
┌─────────────────────────────────────────────────────┐
│  🔗 欄位對應設定                     [新增模板]      │
├─────────────────────────────────────────────────────┤
│                                                     │
│  選擇模板: [customer_template_1 ▼]                  │
│                                                     │
│  ┌─────────────────────┬─────────────────────────┐ │
│  │ SSOT 欄位           │ Word 書籤/權杖           │ │
│  ├─────────────────────┼─────────────────────────┤ │
│  │ product.name        │ [ProductName      ] [×] │ │
│  │ product.version     │ [ProductVersion   ] [×] │ │
│  │ specifications.     │ [HardwareCPU      ] [×] │ │
│  │   hardware.cpu      │                         │ │
│  │ specifications.     │ [HardwareMemory   ] [×] │ │
│  │   hardware.memory   │                         │ │
│  │ specifications.     │ [SoftwareOS       ] [×] │ │
│  │   software.os       │                         │ │
│  │ project.timeline.   │ [ProjectStartDate ] [×] │ │
│  │   start_date        │                         │ │
│  └─────────────────────┴─────────────────────────┘ │
│                                                     │
│                             [➕ 新增對應] [💾 儲存]  │
│                                                     │
│  💡 提示: 拖拉 SSOT 欄位到右側,或點擊 [➕] 手動新增  │
└─────────────────────────────────────────────────────┘
```

### 頁面 3: 文件產生控制台

```
┌─────────────────────────────────────────────────────┐
│  📄 文件產生                                         │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ⚙️ 產生設定                                         │
│  ┌─────────────────────────────────────────────┐   │
│  │ 引擎模式: ◉ 自動 (Auto)                      │   │
│  │          ○ 純 Python (Pure)                 │   │
│  │          ○ Office COM (Office)              │   │
│  │                                              │   │
│  │ 選擇模板: ☑ customer_template_1.docx         │   │
│  │          ☑ customer_excel_1.xlsx            │   │
│  │          ☐ report_template.docx             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│               [🚀 開始產生文件]                      │
│                                                     │
│  📊 執行狀態                                         │
│  ┌─────────────────────────────────────────────┐   │
│  │ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░ 65%                    │   │
│  │                                              │   │
│  │ ✅ customer_template_1.docx (已完成)         │   │
│  │ 🔄 customer_excel_1.xlsx (處理中...)         │   │
│  │                                              │   │
│  │ 日誌:                                         │   │
│  │ [11:30:15] 載入 SSOT 資料...                 │   │
│  │ [11:30:16] 處理 Word 模板...                 │   │
│  │ [11:30:18] ✅ 成功替換 8 個欄位               │   │
│  │ [11:30:19] 處理 Excel 模板...                │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  📥 產生結果                                         │
│  ┌─────────────────────────────────────────────┐   │
│  │ 📄 customer_template_1_filled.docx           │   │
│  │    [📥 下載] [👁️ 預覽]                       │   │
│  │                                              │   │
│  │ 📊 customer_excel_1_filled.xlsx              │   │
│  │    [📥 下載] [👁️ 預覽]                       │   │
│  └─────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
```

### 頁面 4: 驗證與歷史

```
┌─────────────────────────────────────────────────────┐
│  ✓ 驗證與歷史                                        │
├─────────────────────────────────────────────────────┤
│                                                     │
│  🔍 一致性驗證                                       │
│  ┌─────────────────────────────────────────────┐   │
│  │ 最後驗證: 2025-11-13 11:35:22               │   │
│  │ 狀態: ✅ 全部通過                            │   │
│  │                                              │   │
│  │ ✅ customer_template_1.docx - 8/8 欄位一致   │   │
│  │ ✅ customer_excel_1.xlsx - 6/6 欄位一致      │   │
│  │                                              │   │
│  │               [🔄 重新驗證]                   │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  📜 產生歷史                                         │
│  ┌─────────────────────────────────────────────┐   │
│  │ 2025-11-13 11:30:22 | 成功 | 2 個文件       │   │
│  │ 2025-11-13 10:15:45 | 成功 | 2 個文件       │   │
│  │ 2025-11-12 16:22:11 | 失敗 | 權杖未替換     │   │
│  │ 2025-11-12 15:10:03 | 成功 | 1 個文件       │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  📊 統計資訊                                         │
│  ┌─────────────────────────────────────────────┐   │
│  │ 總產生次數: 147                              │   │
│  │ 成功率: 94.5%                                │   │
│  │ 平均處理時間: 2.3 秒                         │   │
│  └─────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
```

---

## 🛠️ 技術架構

### 前端技術棧

```
Vue 3 (Composition API)
  ├─ Vite (建置工具)
  ├─ Pinia (狀態管理)
  ├─ Vue Router (路由)
  ├─ Element Plus (UI 元件庫)
  ├─ Axios (HTTP 請求)
  └─ Monaco Editor (YAML 編輯器,進階模式)
```

### 後端技術棧

```
Flask (Python Web 框架)
  ├─ Flask-CORS (跨域支援)
  ├─ Flask-SocketIO (即時通訊)
  ├─ APScheduler (任務排程)
  └─ 整合現有 scripts/
```

### 系統架構圖

```
┌─────────────────────────────────────────────┐
│           瀏覽器 (Vue 3 SPA)                 │
│  ┌─────────────────────────────────────┐   │
│  │  SSOT編輯  │  對應設定  │  文件產生  │   │
│  └─────────────────────────────────────┘   │
└──────────────────┬──────────────────────────┘
                   │ HTTP/WebSocket
                   ▼
┌─────────────────────────────────────────────┐
│          Flask API Server                   │
│  ┌─────────────────────────────────────┐   │
│  │  /api/ssot          (CRUD)          │   │
│  │  /api/mapping       (CRUD)          │   │
│  │  /api/generate      (文件產生)       │   │
│  │  /api/validate      (驗證)          │   │
│  │  /api/templates     (模板管理)       │   │
│  │  /api/history       (歷史記錄)       │   │
│  └─────────────────────────────────────┘   │
└──────────────────┬──────────────────────────┘
                   │
                   ▼
┌─────────────────────────────────────────────┐
│          現有 Python 模組                    │
│  ┌─────────────────────────────────────┐   │
│  │  generate_docs.py                   │   │
│  │  validate_consistency.py            │   │
│  │  export_ssot_json.py                │   │
│  └─────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
                   │
                   ▼
┌─────────────────────────────────────────────┐
│          檔案系統                            │
│  ssot/  mapping/  templates/  output/       │
└─────────────────────────────────────────────┘
```

---

## 🎯 核心功能特色

### 1. 拖拉式欄位對應 (Drag & Drop)

```javascript
// 視覺化欄位對應
從 SSOT 樹狀結構 ──拖拉──> Word 書籤列表

product
  ├─ name ──────────────────> ProductName
  ├─ version ───────────────> ProductVersion
  └─ description

specifications
  ├─ hardware
  │   ├─ cpu ───────────────> HardwareCPU
  │   └─ memory ────────────> HardwareMemory
  └─ software
      └─ os ────────────────> SoftwareOS
```

### 2. 即時預覽

```
編輯 SSOT → 即時顯示 → 最終文件預覽
```

### 3. 智慧建議

```
🤖 系統自動建議:
  • 根據欄位名稱猜測對應關係
  • 檢測未使用的書籤
  • 警告重複對應
  • 建議權杖命名規範
```

### 4. 批次操作

```
✅ 一鍵產生所有模板
✅ 批次驗證
✅ 批次下載
✅ 批次匯出 (ZIP)
```

### 5. 協作功能

```
👥 多人協作:
  • 鎖定編輯 (防止衝突)
  • 變更歷史
  • 版本比較
  • 留言討論
```

---

## 📱 響應式設計

支援桌面、平板、手機:

```
Desktop (>1200px)  : 三欄式佈局
Tablet  (768-1199px): 兩欄式佈局
Mobile  (<768px)   : 單欄式佈局 + 漢堡選單
```

---

## 🚀 實施計劃

### Phase 1: MVP (最小可行產品) - 2 週

✅ SSOT 表單編輯  
✅ 基本欄位對應設定  
✅ 文件產生功能  
✅ 結果下載

### Phase 2: 進階功能 - 2 週

✅ 拖拉式欄位對應  
✅ 即時驗證  
✅ 歷史記錄  
✅ 錯誤診斷

### Phase 3: 優化 - 1 週

✅ 效能優化  
✅ UI/UX 改善  
✅ 多語系支援  
✅ 說明文件

---

## 💡 未來擴展

### 進階功能

1. **AI 輔助對應**
   - 自動辨識欄位關聯
   - 智慧建議書籤名稱

2. **雲端協作**
   - 多人即時編輯
   - 雲端儲存

3. **範本市場**
   - 分享對應設定
   - 下載常用範本

4. **整合第三方**
   - Confluence 同步
   - JIRA 整合
   - Slack 通知

---

## 🎨 設計原則

### 使用者體驗

1. **簡單直覺**: 3 次點擊內完成主要操作
2. **即時回饋**: 所有操作立即顯示結果
3. **容錯設計**: 操作前確認,失敗可復原
4. **引導式**: 首次使用有教學導覽

### 視覺設計

1. **色彩**: 採用品牌色 + 語意色 (成功綠/警告黃/錯誤紅)
2. **圖示**: Material Design Icons
3. **間距**: 8px 基準網格
4. **字體**: 系統字體 (Segoe UI / SF Pro / Roboto)

---

## 📊 效益評估

### 時間節省

| 操作 | 命令列 | Web UI | 節省 |
|------|--------|--------|------|
| 編輯 SSOT | 5 分鐘 | 2 分鐘 | 60% |
| 設定對應 | 10 分鐘 | 3 分鐘 | 70% |
| 產生文件 | 3 分鐘 | 30 秒 | 83% |
| 驗證結果 | 5 分鐘 | 1 分鐘 | 80% |
| **總計** | **23 分鐘** | **6.5 分鐘** | **72%** |

### 學習曲線

- **命令列**: 需 1-2 小時學習
- **Web UI**: 5-10 分鐘上手

### 錯誤率

- **命令列**: 約 15% (語法錯誤、路徑錯誤)
- **Web UI**: 約 3% (UI 引導減少錯誤)

---

**建議**: 優先實作 Web UI 方案,以 Flask + Vue 3 為基礎,快速交付 MVP,再逐步擴展功能。
